(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpkg/searchResult/searchResult"],{"31e3":function(t,e,r){},4499:function(t,e,r){"use strict";r.r(e);var n=r("e76d"),a=r("74da");for(var u in a)"default"!==u&&function(t){r.d(e,t,(function(){return a[t]}))}(u);r("f447");var i,s=r("f0c5"),o=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);e["default"]=o.exports},"484b":function(t,e,r){"use strict";(function(t){r("bd7e");n(r("66fd"));var e=n(r("4499"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=r,t(e.default)}).call(this,r("543d")["createPage"])},"74da":function(t,e,r){"use strict";r.r(e);var n=r("dfc7"),a=r.n(n);for(var u in n)"default"!==u&&function(t){r.d(e,t,(function(){return n[t]}))}(u);e["default"]=a.a},dfc7:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(r("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,r,n,a,u,i){try{var s=t[u](i),o=s.value}catch(c){return void r(c)}s.done?e(o):Promise.resolve(o).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){u(i,n,a,s,o,"next",t)}function o(t){u(i,n,a,s,o,"throw",t)}s(void 0)}))}}function s(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,u=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw u}}}}function o(t,e){if(t){if("string"===typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l={data:function(){return{keyword:"",selectedAttrIndex:-1,selectedAttrValueIndex:-1,hideAttrListPanel:!0,selectedAttrList:[],selected_attrName:"",keyWordSpuList:[],spuList:[]}},computed:{attrList:function(){var t=[],e=new Map;this.keyWordSpuList.forEach((function(t){t.attrList.forEach((function(t){var r=void 0;e.has(t.attrName)?r=e.get(t.attrName):(r=new Set,e.set(t.attrName,r)),r.add(t.attrValue)}))}));var r,n=s(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;t.push({attrName:a[0],values:Array.from(a[1])})}}catch(u){n.e(u)}finally{n.f()}return t},hiddenSaleAttrList:function(){return 0===this.spuList.length},selected_attr_values:function(){return-1!==this.selectedAttrIndex?this.attrList[this.selectedAttrIndex].values:[]}},watch:{spuList:function(){this.spuList.forEach((function(t){t.attrValueString=t.attrList.reduce((function(t,e){return t+e.attrValue+" "}),"")}))}},methods:{searchBarFocus:function(){t.navigateTo({url:"/subpkg/search/search"})},searchBarConfirmHandler:function(t){var e=this;return i(n.default.mark((function r(){return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.reqSpuList({keyword:t.value});case 2:e.spuList=e.keyWordSpuList=r.sent;case 3:case"end":return r.stop()}}),r)})))()},goDetail:function(e,r){return i(n.default.mark((function a(){return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.navigateTo({url:"/subpkg/spuDetail/spuDetail?_id=".concat(e,"&sku_id=").concat(r)});case 1:case"end":return n.stop()}}),a)})))()},selectAttr:function(t){!0===this.hideAttrListPanel?this.hideAttrListPanel=!1:this.selectedAttrIndex===t&&(this.hideAttrListPanel=!0),this.selectedAttrIndex=t,this.selected_attrName=this.attrList[t].attrName},selectAttrValue:function(t){var e=this.selectedAttrList,r=this.selectedAttrIndex,n=this.attrList,a=n[r].attrName,u=n[r].values[t],i=e.findIndex((function(t){return t.attrName===a}));e[i]?e[i].attrValue===u?(e.splice(i,1),n[r].selectedValue="",this.selectedAttrValueIndex=-1):(e[i].attrValue=u,n[r].selectedValue=u,this.selectedAttrValueIndex=t):(e.push({attrName:a,attrValue:u}),n[r].selectedValue=u,this.selectedAttrValueIndex=t),this.selectedAttrList=e,this.hideAttrListPanel=!0;var s={};s.keyword=this.keyword,e.forEach((function(t){s[t.attrName]=t.attrValue})),this.updateSpuInfo(s)},initSpuInfo:function(t){var e=this;return i(n.default.mark((function r(){var a;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.reqSpuList(t);case 2:a=r.sent,e.keyWordSpuList=e.spuList=a;case 4:case"end":return r.stop()}}),r)})))()},updateSpuInfo:function(e){var r=this;return i(n.default.mark((function a(){var u;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.lobo.request({url:"/v1/search",method:"GET",query:e});case 2:u=n.sent,u.data.data.forEach((function(t){t.attrValueString=t.attrList.reduce((function(t,e){return t+e.attrValue+" "}),"")})),r.spuList=u.data.data;case 5:case"end":return n.stop()}}),a)})))()},reqSpuList:function(e){return i(n.default.mark((function r(){var a;return n.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.lobo.request({url:"/v1/search",method:"GET",query:e});case 2:return a=r.sent,r.abrupt("return",a.data.data);case 4:case"end":return r.stop()}}),r)})))()},isSelectedAttrValue:function(t,e){return this.selectedAttrList.some((function(r){return r.attrName===t&&r.attrValue===e}))}},onLoad:function(t){console.log(t),this.keyword=t.keyword,this.initSpuInfo({keyword:this.keyword})}};e.default=l}).call(this,r("543d")["default"])},e76d:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return n}));var n={uniSearchBar:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar")]).then(r.bind(null,"c5fa"))},myDrawer:function(){return r.e("components/my-drawer/my-drawer").then(r.bind(null,"11dd"))},uEmpty:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-empty/u-empty")]).then(r.bind(null,"5d4b"))}},a=function(){var t=this,e=t.$createElement,r=(t._self._c,0!==t.spuList.length?t.__map(t.selected_attr_values,(function(e,r){var n=t.__get_orig(e),a=t.isSelectedAttrValue(t.selected_attrName,e);return{$orig:n,m0:a}})):null);t.$mp.data=Object.assign({},{$root:{l0:r}})},u=[]},f447:function(t,e,r){"use strict";var n=r("31e3"),a=r.n(n);a.a}},[["484b","common/runtime","common/vendor"]]]);